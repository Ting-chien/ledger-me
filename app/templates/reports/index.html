{% extends "base.html" %}

{% block page_content %}
<div class="d-flex justify-content-between align-items-center mt-3 mb-3">
    <h1 class="m-0">Reports &amp; Analytics</h1>
    <div class="btn-group" role="group" aria-label="Chart Range">
        <button type="button" class="btn btn-outline-primary active" id="btn-month">Month</button>
        <button type="button" class="btn btn-outline-primary" id="btn-week">Week</button>
    </div>
</div>
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-md-4">
            {% include "reports/total_expenses.html" %}
        </div>
        <div class="col-md-4">
            {% include "reports/expenses_breakdown.html" %}
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            {% include "reports/expenses_trend.html" %}
        </div>
    </div>
</div>
<script>
let currentRange = 'month';
function updateAllWidgets() {
    window.fetchAndRenderTotalExpense(currentRange);
    window.fetchAndRenderBreakdown(currentRange);
    window.fetchAndRenderTrend(currentRange);
}
document.addEventListener('DOMContentLoaded', function() {
    updateAllWidgets();
    document.getElementById('btn-month').addEventListener('click', function() {
        currentRange = 'month';
        this.classList.add('active');
        document.getElementById('btn-week').classList.remove('active');
        updateAllWidgets();
    });
    document.getElementById('btn-week').addEventListener('click', function() {
        currentRange = 'week';
        this.classList.add('active');
        document.getElementById('btn-month').classList.remove('active');
        updateAllWidgets();
    });
});
</script>
{% endblock %}
